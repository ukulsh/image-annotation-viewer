<!DOCTYPE html>
<html>
<head>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.11.4/paper-full.min.js"></script>
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      


<!-- Define inlined JavaScript -->

<script type="text/javascript">

	var imagedata;
	// Only executed our code once the DOM is ready.
	var json = (function () {
    var json = null;
    $.ajax({
        'async': false,
        'global': false,
        'url': 'data.json',
        'dataType': "json",
        'success': function (data) {
            json = data;
        }
    });
    return json;
})();
	// console.log(json);
	// console.log("2++++++++++++");
	window.onload = function() {
		// Get a reference to the canvas object
		var path,rectangle,text = 0;
		var canvas = document.getElementById('myCanvas');
		// Create an empty project and a view for the canvas:
		
		paper.setup('myCanvas');
		
		var raster = new paper.Raster({
		source: json.images[0].flickr_url,
		});
		raster.position = paper.view.center;
    	// this.bounds.width = paper.view.bounds.width;
    	// this.bounds.height = paper.view.bounds.height;
		// raster.scale();
		canvas.addEventListener("mouseenter", function(event){
			console.log(event);
			var layer = new paper.Layer();
		var objArray = json.annotations;
		value = json.images[0].id;
		// console.log(objArray);
		var obj = objArray.find(obj =>  {
			// console.log(obj);
			if (obj.image_id == 393372)
			{console.log("++++++++");
			return true}});
		// console.log(obj);
			obj = obj.bbox;
			console.log(obj);
		rectangle = new paper.Rectangle(obj[0],obj[1],obj[2],obj[3]);
		path = new paper.Path.Rectangle(rectangle);
		text = new paper.PointText(new paper.Point(200, 50));
		text.justification = 'center';
		text.fillColor = 'red';
		text.content = 'The contents of the point text';
		// Give the stroke a color
		
		console.log(path);
		path.strokeColor = 'black';
		path.selected = false;
		});
		canvas.addEventListener("mouseout", function(event) {
			path.remove();
			text.remove()
			console.log("does thisasdfad")
		});
		// Create a Paper.js Path to draw a line into it:
		// Draw the view now:
	}

</script>
</head>
<body>
	<canvas id="myCanvas" height="640" width="480"></canvas>
</body>
</html>